(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){if(typeof module!=="object"||typeof module!=="function")var lib=factory();module.exports=lib}else{var libx=factory();root[libx["exportName"]]=libx}})(typeof self!=="undefined"?self:this,function(){"use strict";var jado={};jado.exportName="jado";var _log=false;jado.setLogEnable=function(v){_log=v==true?true:false;return _log};jado.getLogEnable=function(){return _log};jado.log=function(){if(_log)console.log(arguments)};jado.setLogF=function(f){jado.log=_to(f)!="function"?jado.log:function(){if(_log)f(arguments[0])}};jado.map=function(d,f){var k,r=_ct(d);if(_il(_v(d)))for(k in d){r[k]=f(_v(d[k]))}else r=f(_v(d));return r};jado.mapx=function(d,f){var k,r=_ct(d);if(_il(_v(d)))for(k in d){r[k]=f(k,_v(d[k]))}else r=f(_v(d));return r};jado.forEach=function(d,f){var k;if(_il(_v(d)))for(k in d){f(k,_v(d[k]))}else f(_v(d))};jado.filter=function(d,f){var k,r=_ct(d);if(_il(_v(d)))for(k in d){if(f(d[k])==true){if(_to(r)=="array"){r.push(d[k])}else{r[k]=d[k]}}}else if(f(d)==true)r=d[k];return r};jado.filterx=function(d,f){var k,r=_ct(d);if(_il(_v(d)))for(k in d){if(f(k,d[k])==true){if(_to(r)=="array"){r.push(d[k])}else{r[k]=d[k]}}}else if(f(d)==true)r=d[k];return r};jado.reduce=function(d,f,i){var k,r=i;if(_il(_v(d)))for(k in d){r=f(d[k],r)}else{r=f(d,r)}return r};jado.reducex=function(d,f,i){var k,r=i;if(_il(_v(d)))for(k in d){r=f(k,d[k],r)}else{r=f(d,r)}return r};jado.o2a=function(d){return _il(d)?_rx(d,function(k,v,i){i.push([k,v]);return i},[]):[0,d]};jado.cloneType=function(x){return new x.constructor};jado.isList=function(x){return _ch(_to(x),{array:true,object:true},false)};jado.choice=function(x,c,def){return x in c?c[x]:def};jado.deepClone=function(from,to){if(from==null||_to(from)!="object"||_il(from)==false)return from;if(from.constructor in[Date,RegExp,Function,String,Number,Boolean])return new from.constructor(from);to=to||new from.constructor;for(var name in from)to[name]=_to(to[name])=="undefined"?jado.deepClone(from[name],null):to[name];return to};jado.len=function(x){if(_il(x)==false){return 1}return _to(x)!="object"?x.length:Object.keys(x).length};jado.lend=function(x,c){var cc=c==true?1:0;var f=function(a,i){return _il(a)?_r(a,f,i+cc):i+1};return f(x,0)};jado.typeOf=function(x,baseTypeOnly){if(x===null)return"null";var y=typeof x=="undefined"?"undefined":{}.toString.call(x).match(/\s([a-zA-Z]+)/)[1].toLocaleLowerCase();if(y!="object"&&y!="function")return y;if(baseTypeOnly==true)return y;var r=y;try{r=x.constructor.name.toLocaleLowerCase()==y.toLocaleLowerCase()?y:x.constructor.name}catch(e){}return r};jado.applyd=function(d,f){var _f=function(a,fa){var i;if(_il(a)){for(i in a){a[i]=_f(a[i],fa)}return a}return fa(a)};return _f(d,f)};jado.getValue=function(x,def){if(_to(x)=="function")return x();return _to(x)=="undefined"?def:x};jado.setValue=function(x,def){return _to(x)=="undefined"?def:x};jado.a2s=function(a,e){return _r(a,function(v,i){if(e!=false)return i+_v(v).toString();return i+v.toString()},"")};jado.s2a=function(s){return _r(s,function(v,i){i.push(v);return i},[])};var _f=jado._f=jado.filter;var _fx=jado._fx=jado.filterx;var _r=jado._r=jado.reduce;var _rx=jado._rx=jado.reducex;var _m=jado._m=jado.map;var _mx=jado._mx=jado.mapx;var _o2a=jado.o2a;var _dc=jado._dc=jado.deepClone;var _ct=jado._ct=jado.cloneType;var _to=jado._to=jado.typeOf;var _v=jado._v=jado.getValue;var _sv=jado._sv=jado.setValue;var _il=jado._il=jado.isList;var _ch=jado._ch=jado.choice;jado.version=function(){return{version:"1.0.8",about:"Jado is a simple library operations where any variable can be treated as an iterable.  Also includes stats for counting lists (e.g. avg var med mode etc).",copy:"(c) M A Chatterjee.  email: deftio (at) deftio (dot) com",license:"BSD-2 Clause"}};jado.cset=function(){var c={};var uniq=function(x){return Object.keys(_r(x,function(z,i){i[z]=1;return i},{}))};this.add=function(x){_r(x,function(z,i){i[z]=z in i?i[z]+1:1;return i},c);return cnt(x)};this.dec=function(x){_m(uniq(x),function(z){if(z in c){c[z]-=1;if(c[z]<=0){delete c[z]}}});return cnt(x)};this.del=function(x){_m(uniq(x),function(z){if(z in c)delete c[z]});return 0};this.cnt=function(x){return _r(uniq(x),function(z,i){return z in c?c[z]+i:i},0)};this.cntk=function(){return Object.keys(c).length};this.ttl=function(){return _r(c,function(x,i){i+=x;return i},0)};this.all=function(){return c};this.clr=function(){c={};return cnt()};this.keys=function(){return Object.keys(c)};this.get=function(x){var r={},i,u=uniq(x);for(i=0;i<u.length;i++)r[u[i]]=cnt(u[i]);return r};this.set=function(x){if(_to(x)=="object"){for(var i in x){c[i]=x[i]}}return cnt(x)};this.avg=function(){var a;return cntk()<1?a:this.ttl()/cntk()};this.min=function(x){var r=_o2a(c),y=_to(x)=="number"?x:1;r.sort(sf);return r.slice(0,y)};this.max=function(x){var r=_o2a(c),y=_to(x)=="number"?x:1;r.sort(sf);return r.slice(r.length-y)};this.med=function(){var r=_o2a(c),l=r.length;r.sort(sf);return(l&1)==1?r[l/2-.5]:[r[l/2-1],r[l/2]]};this.vari=function(){var a=this.avg();return _to(a)=="number"?_r(c,function(j,i){i+=(j-a)*(j-a);return i},0)/this.cntk():a};this.std=function(){var v=this.vari();return _to(v)=="number"?Math.sqrt(v):v};this.clone=function(){var x=new jado.cset;x.set(c);return x};this.ap2o=function(p){return _rx(p,function(k,v,i){i[k]=v;return i},{})};this.type="jado.cset";this.x2o=function(){};var cnt=this.cnt;var cntk=this.cntk;var sf=function(a,b){return a[1]-b[1]};this.u=uniq;return this};jado.getkv=function(d,f,p){p=_to(p)=="undefined"?"":p+"/";f=_to(f)=="function"?f:function(x){jado.log(x)};_rx(d,function(k,v){if(_il(v))v=jado.getkv(v,f,p+k);f(p.toString()+k.toString()+"--\x3e"+v);return v},p);return""};jado.pathToStr=function(p,delim,esc){delim=_to(delim)=="string"?delim[0]:"/";esc=_to(esc)=="string"?esc:"\\";esc=_ch(esc.length.toString(),{0:"\\",1:esc},esc[0]);return _m(p,function(x){return x.toString().replace(esc,esc+esc).replace(delim,esc+delim)}).join(delim)};jado.strToPath=function(s,delim,esc){var p;delim=_to(delim)=="string"?delim:"/";esc=_to(esc)=="string"?esc:"\\";esc=_ch(esc.length.toString(),{0:"\\",1:esc},esc[0]);if(_to(s)=="string"){var pc="",i,k="";try{pc=JSON.parse(s)}catch(e){}if(_to(pc)=="array"){for(i=0;i<pc.length;i++)if(_to(pc[i])!="string"&&_to(pc[i])!="number")return p;return pc}p=[];for(i=0;i<s.length;i++){if(s[i]==esc){if(s[i+1]==esc||delim.indexOf(s[i+1])!=-1){k+=s[i+1];i++}else k+=s[i]}else if(delim.indexOf(s[i])!=-1){p.push(k);k=""}else k+=s[i]}p.push(k);return p}return p};jado.pathNorm=function(p,delim,esc){var t=_to(p);return _ch(t,{array:p,string:jado.strToPath(p,delim,esc),number:[p.toString()]},[])};jado.p2v=function(d,p,delim,esc){var val;p=_to(p)=="undefined"?[]:jado.pathNorm(p,delim,esc);if(_il(d)==false){return p.length==0?d:val}try{var i,x=d;for(i=0;i<p.length;i++){if(p[i]in x)x=x[p[i]];else return val}return x}catch(e){jado.log("jado.p2v: bad path")}return val};jado.prettyPrintJSON=function(json){function f(json){json=JSON.stringify(json,undefined,2);if(typeof json!="string"){json=JSON.stringify(json,undefined,2)}json=json.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(match){var sty="color: darkorange;";if(/^"/.test(match)){if(/:$/.test(match)){sty="color:red"}else{sty="color:purple"}}else if(/true|false/.test(match)){sty="color:grey"}else if(/null/.test(match)){sty="color:black"}else sty="color:green";return'<span style="'+sty+'">'+match+"</span>"})}return"<pre style=''>"+f(json)+"</pre>"};jado.htmlSafeStr=function(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};return jado});